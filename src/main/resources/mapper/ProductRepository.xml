<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.coffee.model.repository.ProductRepository">

<select id="findAll" resultType="org.example.coffee.model.dto.ProductDTO">
SELECT PRODUCT_ID AS 'productId', PRODUCT_NAME AS 'productName', CATEGORY, PRICE, DESCRIPTION, CREATED_AT AS 'createdAt', UPDATED_AT AS 'updatedAt' FROM PRODUCTS
</select>

<select id="findAllCategory" resultType="string">
SELECT DISTINCT CATEGORY FROM PRODUCTS
</select>

<select id="findByCategory" parameterType="string" resultType="org.example.coffee.model.dto.ProductDTO">
SELECT PRODUCT_ID AS 'productId', PRODUCT_NAME AS 'productName', CATEGORY, PRICE, DESCRIPTION, CREATED_AT AS 'createdAt', UPDATED_AT AS 'updatedAt' FROM PRODUCTS
WHERE CATEGORY = #{cat}
</select>

<insert id="insert" parameterType="org.example.coffee.model.dto.ProductDTO">
INSERT INTO PRODUCTS(PRODUCT_ID, PRODUCT_NAME, CATEGORY, PRICE, DESCRIPTION, CREATED_AT)
VALUES(UUID_TO_BIN(#{productId}), #{productName}, #{category}, #{price}, #{description}, NOW())
</insert>

</mapper>